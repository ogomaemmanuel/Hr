(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{460:function(t,e,s){var i=s(557);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,s(22).default)("10205cf0",i,!1,{})},556:function(t,e,s){"use strict";s(460)},557:function(t,e,s){(t.exports=s(21)(!1)).push([t.i,".card-content[data-v-23bdaae6]{padding:1.5rem 15rem}.logo-input[data-v-23bdaae6]{min-height:50px}",""])},677:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card animated preFadeInUp fadeInUp"},[e("div",{staticClass:"card-content"},[e("h1",{staticClass:"has-text-weight-bold flex justify-center is-size-4 pb-4"},[t._v("Invoice Settings")]),t._v(" "),e("div",{staticClass:"field"},[e("div",{staticClass:"columns"},[t._m(0),t._v(" "),e("div",{staticClass:"column"},[e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.setting.prefix,expression:"setting.prefix"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.setting.prefix},on:{input:[function(e){e.target.composing||t.$set(t.setting,"prefix",e.target.value)},function(e){return t.clearFieldError("prefix")}]}}),t._v(" "),t.errors.prefix?e("span",{staticClass:"mb-2 has-text-danger"},[t._v("\n\t\t\t\t\t\t        "+t._s(t.errors.prefix[0])+"\n\t\t\t\t\t        ")]):t._e()])])]),t._v(" "),e("div",{staticClass:"columns"},[t._m(1),t._v(" "),e("div",{staticClass:"column"},[e("div",{staticClass:"control"},[e("input",{ref:"logoInput",staticClass:"hidden",attrs:{type:"file"},on:{input:function(e){return t.clearFieldError("logoUrl")},change:t.onFileSelected}}),t._v(" "),e("img",{staticClass:"logo-input border-2",attrs:{src:t.logoPreview},on:{click:function(e){return e.preventDefault(),t.$refs.logoInput.click()}}}),t._v(" "),t.errors.logoUrl?e("span",{staticClass:"has-text-danger"},[t._v("\n                                            "+t._s(t.errors.logoUrl[0]))]):t._e()])])])]),t._v(" "),e("div",{staticClass:"flex justify-end"},[e("button",{staticClass:"button is-rounded p-2",class:{"is-loading":t.isLoading},attrs:{disabled:t.disableSubmitButton},on:{click:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[t._v("\n          Submit\n        ")])])])])};i._withStripped=!0;s(186),s(83);var a=s(187),n=s.n(a),o=(s(328),s(329)),r=s.n(o),l=(s(330),s(331)),c=s.n(l),d=s(34),u={name:"EmailSettingsForm",components:{Select:c.a,Option:r.a},mixins:[d.a],data:()=>({setting:{id:"",prefix:"",logoUrl:null},logoPreview:"/images/placeholder.jpg",isLoading:!1}),created(){this.getSettings()},computed:{disableSubmitButton(){let t=this.setting;return t.prefix.length<=0||null===t.logoUrl||this.isLoading}},methods:{getSettings(){let t=this;axios.get("/api/settings/invoice").then(e=>{e.data.length>0&&(t.setting=e.data)})},submit(){let t=this,e=new FormData;e.append("id",t.setting.id),e.append("prefix",t.setting.prefix),e.append("logoUrl",t.setting.logoUrl),t.isLoading=!0,axios.post("/api/settings/invoice/update",e).then(e=>{t.isLoading=!1,"00"===e.data.status?n.a.success(e.data.msg):n.a.error(e.data.msg),t.getSettings()},e=>{400===e.response.status?this.errors=e.response.data:n.a.error("Something went wrong. Contact Admin"),t.isLoading=!1})},onFileSelected(t){this.setting.logoUrl=t.target.files[0],this.updatePreview(t)},updatePreview(t){let e,s=this,i=t.target.files;e=new FileReader,e.onload=t=>{s.logoPreview=t.target.result},e.readAsDataURL(i[0])}}},p=(s(556),s(15)),g=Object(p.a)(u,i,[function(){var t=this._self._c;return t("div",{staticClass:"column"},[t("label",{staticClass:"label"},[this._v("Invoice Prefix "),t("span",[t("sup",[this._v("*")])])])])},function(){var t=this._self._c;return t("div",{staticClass:"column"},[t("label",{staticClass:"label"},[this._v("Invoice Logo "),t("span",[t("sup",[this._v("*")])])])])}],!1,null,"23bdaae6",null);e.default=g.exports}}]);